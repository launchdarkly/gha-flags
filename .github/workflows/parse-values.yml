name: Parse values
on: push
jobs:
  parse-values:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Evaluate flags
        id: flags
        uses: ./
        with:
          stream-uri: 'https://stream.ld.catamorphic.com'
          events-uri: 'https://events.ld.catamorphic.com'
          base-uri: 'https://app.ld.catamorphic.com'
          sdk-key: ${{ secrets.SDK_KEY }}
          flags: |
            test-boolean-flag
            test-number-flag
      - name: If true
        if: fromJSON(steps.flags.outputs.test-boolean-flag) == true
        run: echo "It's true"
      - name: If false
        if: fromJSON(steps.flags.outputs.test-boolean-flag) == false
        run: echo "It's false"
      - name: If number is 100
        if: fromJSON(steps.flags.outputs.test-number-flag) == 100
        run: echo "Number is 100"
      - name: If number is 200
        if: fromJSON(steps.flags.outputs.test-number-flag) == 200
        run: echo "Number is 200"
